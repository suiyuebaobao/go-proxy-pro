# Go-AIProxy 文档中心

## 代码文件注释规范（必须）

**所有项目代码文件**（`.go`、`.vue`、`.js`、`.ts` 等）的开头必须添加文件说明注释，包含以下内容：

### Go 文件模板

```go
/*
 * 文件作用：[一句话说明这个文件干什么]
 * 负责功能：
 *   - 功能1
 *   - 功能2
 *   - 功能3
 * 重要程度：⭐⭐⭐⭐⭐ 核心 / ⭐⭐⭐⭐ 重要 / ⭐⭐⭐ 一般 / ⭐⭐ 辅助 / ⭐ 工具
 * 依赖模块：[列出主要依赖的内部模块]
 */
package xxx
```

### Go 文件示例

```go
/*
 * 文件作用：账户调度器，负责从多个AI平台账户中选择合适的账户处理请求
 * 负责功能：
 *   - 账户选择（按模型、按类型、按权重）
 *   - 会话粘性（同一会话路由到同一账户）
 *   - AllowedModels 过滤
 *   - ModelMapping 映射处理
 *   - 账户状态管理（错误标记、限流恢复）
 * 重要程度：⭐⭐⭐⭐⭐ 核心（代理转发的核心调度逻辑）
 * 依赖模块：cache, model, repository
 */
package scheduler
```

### Vue/JS 文件模板

```vue
<!--
 * 文件作用：[一句话说明这个文件干什么]
 * 负责功能：
 *   - 功能1
 *   - 功能2
 * 重要程度：⭐⭐⭐⭐⭐ 核心 / ⭐⭐⭐⭐ 重要 / ⭐⭐⭐ 一般
 * 依赖组件：[列出主要依赖的组件]
-->
```

### 重要程度标准

| 等级 | 符号 | 说明 | 示例 |
|------|------|------|------|
| 核心 | ⭐⭐⭐⭐⭐ | 系统无法运行的核心模块 | scheduler.go, proxy.go |
| 重要 | ⭐⭐⭐⭐ | 主要业务功能 | account.go, api_key.go |
| 一般 | ⭐⭐⭐ | 辅助业务功能 | usage.go, cache.go |
| 辅助 | ⭐⭐ | 配置、工具类 | config.go, logger.go |
| 工具 | ⭐ | 纯工具函数 | utils.go, helpers.go |

### 更新时机

- **新建文件时**：必须添加文件说明注释
- **功能变更时**：更新"负责功能"列表
- **重构后**：更新依赖模块

---

## 目录结构

```
docs/
├── README.md           # 本文件（文档规范）
├── 代码索引.md          # 代码结构完整索引
├── 功能模块索引.md       # 功能模块索引（关键代码+配置项）
├── 故障排查手册.md       # 问题速查（现象→原因→解决方法）
├── 开发日志/            # 按日期记录开发进度
├── BUG处理/             # BUG修复和功能优化记录
├── 架构设计/            # 整体架构和技术方案
├── 接口文档/            # API 接口文档
├── 决策记录/            # 重要技术决策（ADR）
├── 模块设计/            # 各模块详细设计
└── 参考项目/            # 参考项目源码
```

## 快速导航

| 文档 | 说明 | 适用场景 |
|------|------|----------|
| [故障排查手册](故障排查手册.md) | 问题现象→原因→解决方法 | **遇到问题先看这个** |
| [功能模块索引](功能模块索引.md) | 功能列表、关键代码、配置项 | 修改功能时查看 |
| [代码索引](代码索引.md) | 完整代码结构、变更记录 | 查找代码位置 |
| [后端架构总览](架构设计/后端架构总览.md) | 技术栈、分层架构、数据流 | 理解系统架构 |
| [服务层设计](模块设计/M9-服务层设计.md) | 内存缓存、使用统计详解 | 修改统计逻辑 |

---

## 日志流程规范

### 整体流程

```
┌─────────────────────────────────────────────────────────────────┐
│                        每日开发流程                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 开始工作                                                     │
│     └── 查看昨日 开发日志/ 中的"明日计划"                          │
│                                                                 │
│  2. 开发过程中                                                   │
│     ├── 遇到 BUG → 修复后记录到 BUG处理/YYYY-MM-DD-问题简述.md     │
│     ├── 功能优化 → 记录到 BUG处理/YYYY-MM-DD-优化简述.md           │
│     └── 重大决策 → 记录到 决策记录/ADR-XXX-决策标题.md             │
│                                                                 │
│  3. 结束工作                                                     │
│     ├── 更新 开发日志/YYYY-MM-DD.md（今日工作 + 明日计划）          │
│     └── 更新 README.md 文档更新记录（如有新增文档）                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 文件命名规范

| 类型 | 目录 | 命名格式 | 示例 |
|------|------|----------|------|
| 开发日志 | `开发日志/` | `YYYY-MM-DD.md` | `2025-12-14.md` |
| BUG修复 | `BUG处理/` | `YYYY-MM-DD-问题简述.md` | `2025-12-14-gzip响应解压修复.md` |
| 功能优化 | `BUG处理/` | `YYYY-MM-DD-优化简述.md` | `2025-12-14-客户端过滤简化.md` |
| 决策记录 | `决策记录/` | `ADR-XXX-决策标题.md` | `ADR-001-套餐系统设计.md` |
| 模块设计 | `模块设计/` | `M{编号}-模块名.md` | `M8-套餐系统.md` |
| 接口文档 | `接口文档/` | `模块名-接口文档.md` | `APIKey接口文档.md` |

### 重要规则：按日期创建文档

**每次更新文档时，必须按照当天实际日期创建或更新文件：**

1. **开发日志**: 每天创建新文件 `YYYY-MM-DD.md`，不要追加到旧日期的文件
2. **BUG处理**: 按修复日期命名，不是发现日期
3. **功能优化**: 按完成日期命名

**示例**：今天是 2025-12-14
- 正确：创建 `开发日志/2025-12-14.md`
- 错误：追加内容到 `开发日志/2025-12-13.md`

---

### 功能变更文档更新检查清单

**每次完成功能开发/修复后，必须逐项检查以下文档是否需要更新：**

| 序号 | 文档 | 更新条件 | 必须/可选 |
|------|------|----------|-----------|
| 0 | **代码文件注释** | 新建/修改代码文件 | **必须** |
| 1 | `开发日志/YYYY-MM-DD.md` | 每天必须创建 | **必须** |
| 2 | `代码索引.md` | 新增/修改代码文件、新增功能 | **必须** |
| 3 | `功能模块索引.md` | 功能变更、配置项变更 | **必须** |
| 4 | `接口文档/相关接口.md` | API 接口变更 | **必须** |
| 5 | `模块设计/相关模块.md` | 模块逻辑变更 | **必须** |
| 6 | `故障排查手册.md` | 新增错误类型、排查方法 | 可选 |
| 7 | `决策记录/ADR-XXX.md` | 重大技术决策 | 可选 |
| 8 | `BUG处理/YYYY-MM-DD-xxx.md` | BUG修复或功能优化 | 可选 |
| 9 | `README.md` 文档更新记录 | 上述任何文档有更新 | **必须** |

**检查流程**：
```
完成功能开发
    │
    ├─→ 0. 检查代码文件注释（新文件必加、修改文件必更新）
    │
    ├─→ 1. 创建/更新 开发日志/YYYY-MM-DD.md
    │
    ├─→ 2. 更新 代码索引.md（变更记录 + 代码位置）
    │
    ├─→ 3. 更新 功能模块索引.md（功能说明 + 配置项）
    │
    ├─→ 4. 更新 接口文档/（如有 API 变更）
    │
    ├─→ 5. 更新 模块设计/（如有模块逻辑变更）
    │
    ├─→ 6. 更新 故障排查手册.md（如有新错误类型）
    │
    ├─→ 7. 创建 决策记录/ADR-XXX.md（如有重大决策）
    │
    ├─→ 8. 创建 BUG处理/（如是BUG修复或优化）
    │
    └─→ 9. 更新 README.md 文档更新记录（汇总所有更新）
```

**示例：完成"OpenAI Responses 会话粘性"功能后需更新的文档**：
- [x] `开发日志/2025-12-17.md` - 记录今日工作
- [x] `代码索引.md` - 添加变更记录
- [x] `功能模块索引.md` - M14 模块添加会话粘性说明
- [x] `接口文档/OpenAI-Responses接口文档.md` - 添加会话粘性章节
- [x] `模块设计/M3-代理转发.md` - 更新完成清单、会话粘性说明
- [x] `故障排查手册.md` - 添加会话粘性排查
- [x] `决策记录/ADR-002-会话粘性设计.md` - 新建决策记录
- [x] `README.md` - 更新文档更新记录

---

## 1. 开发日志规范

**目录**: `开发日志/`

**命名**: `YYYY-MM-DD.md`（按实际工作日期，不是提交日期）

**更新时机**: 每日工作结束时更新，**每天创建新文件**

**模板**:

```markdown
# 开发日志 YYYY-MM-DD

## 今日工作

### 1. 功能/任务名称

**需求**: 简述需求背景

**实现方案**: 简述技术方案

**修改文件**:
- `path/to/file.go` - 修改说明
- `path/to/file.vue` - 修改说明

**关键代码**:（可选，复杂逻辑时添加）
```go
// 核心代码片段
```

### 2. 下一个功能/任务...

---

## 技术要点（可选）

记录今日涉及的技术要点、踩坑经验等。

---

## 遗留问题（可选）

- [ ] 问题1
- [ ] 问题2

---

## 明日计划

### 1. 任务名称（优先级高）
- [ ] 具体子任务1
- [ ] 具体子任务2

### 2. 任务名称
- [ ] 具体子任务
```

---

## 2. BUG处理规范

**目录**: `BUG处理/`

**命名**: `YYYY-MM-DD-问题简述.md`

**类型分类**:
- **BUG修复**: 代码错误、逻辑问题、显示异常等
- **功能优化**: 用户体验改进、性能优化、功能增强等

**更新时机**: 问题修复完成后立即记录

**模板**:

```markdown
# BUG/优化: 问题简述

> 日期: YYYY-MM-DD
> 类型: BUG修复 / 功能优化
> 状态: 已修复

---

## 问题描述

详细描述问题现象。

**预期行为**: xxx
**实际行为**: xxx

---

## 问题原因

分析问题产生的原因。

---

## 修复方案

### 1. 修改点1

**文件**: `path/to/file.go`

```go
// 关键代码
```

### 2. 修改点2...

---

## 修改文件清单

| 文件 | 修改内容 |
|------|----------|
| `path/to/file1.go` | 说明 |
| `path/to/file2.vue` | 说明 |

---

## 验证方法

1. 验证步骤1
2. 验证步骤2
3. 预期结果

---

## 相关文档（可选）

- [相关模块设计](../模块设计/xxx.md)
```

---

## 3. 决策记录规范（ADR）

**目录**: `决策记录/`

**命名**: `ADR-XXX-决策标题.md`

**更新时机**: 做出重要技术决策时

**模板**:

```markdown
# ADR-XXX: 决策标题

## 状态
已采纳 / 已废弃 / 待讨论

## 日期
YYYY-MM-DD

## 背景
为什么需要做这个决策？问题是什么？

## 可选方案

### 方案A: 名称
- 优点：
- 缺点：

### 方案B: 名称
- 优点：
- 缺点：

## 决策
选择方案X

## 原因
为什么选择这个方案？

## 影响
这个决策会带来什么影响？
```

---

## 4. 模块设计规范

**目录**: `模块设计/`

**命名**: `M{编号}-模块名.md`

**更新时机**: 模块开发前编写，开发中持续更新

**内容要求**:
- 模块概述
- 功能列表
- 数据结构（表结构、缓存 Key）
- 接口设计
- 核心流程
- 依赖关系

---

## 5. 接口文档规范

**目录**: `接口文档/`

**命名**: `模块名-接口文档.md`

**更新时机**: 接口开发完成后立即添加

**内容要求**:
- 接口路径
- 请求方法
- 请求参数
- 响应格式
- 请求示例

## 6. 代码索引规范

**文件**: `代码索引.md`

**作用**: 代码结构地图 + 变更追踪

**内容结构**:
```markdown
# 代码索引

## 项目结构概览
目录树，每个目录一句话说明

## 后端代码索引
按层分类：handler / middleware / model / repository / service / proxy

## 前端代码索引
按类型分类：页面 / 组件 / 状态管理 / API

## 关键代码位置快速索引
按功能分类，直接定位到文件+方法

## 变更记录
每次重要修改都记录：问题→原因→方案→代码位置
```

**更新时机**:
- 新增文件/目录时
- 重大功能修改时
- 修复 BUG 后（添加到变更记录）

---

## 7. 功能模块索引规范

**文件**: `功能模块索引.md`

**作用**: 功能速查 + 配置参考 + 快速定位

**内容结构**:
```markdown
# 功能模块索引

## 模块名称

### 功能描述
一句话说明这个模块干什么

### 关键代码位置
| 功能 | 文件 | 方法 |
|------|------|------|
| 具体功能 | 文件路径 | 方法名 |

### 可配置项
| 配置项 | 位置 | 默认值 | 说明 |
|--------|------|--------|------|

### 前端页面
对应的前端页面

## 快速定位指南
常见修改需求 → 具体文件和方法
```

**更新时机**:
- 新增功能模块时
- 配置项变化时
- 代码重构后

---

## 8. 故障排查手册规范

**文件**: `故障排查手册.md`（新增）

**作用**: 遇到问题直接查，立刻知道怎么处理

**内容结构**:
```markdown
# 故障排查手册

## 按现象分类

### 一、启动问题
| 现象 | 原因 | 解决方法 |
|------|------|----------|
| 端口被占用 | 其他进程占用 | `lsof -i:8080` 找到进程 kill |
| 数据库连接失败 | 配置错误/服务未启动 | 检查 config.yaml 配置 |

### 二、代理问题
| 现象 | 原因 | 解决方法 |
|------|------|----------|
| 请求超时 | 上游响应慢/网络问题 | 检查账户状态、增加超时时间 |
| 401 Unauthorized | API Key 无效 | 检查 api_keys 表状态 |

### 三、数据问题
| 现象 | 原因 | 解决方法 |
|------|------|----------|
| 余额不扣减 | 使用量未更新 | 检查 proxy.go recordUsage() |
| 费用显示0 | MySQL 无数据 | 检查 daily_usages 表 |

### 四、前端问题
| 现象 | 原因 | 解决方法 |
|------|------|----------|

## 按错误信息分类

### "invalid token"
- **文件**: `internal/middleware/jwt.go`
- **原因**: Token 过期或格式错误
- **解决**: 重新登录获取新 Token

### "account not available"
- **文件**: `internal/proxy/scheduler/scheduler.go`
- **原因**: 没有可用账户
- **解决**: 检查账户启用状态、限流状态

## 日志查看指南

### 查看服务日志
```bash
# 查看最近日志
tail -f logs/app.log

# 搜索错误
grep "error" logs/app.log | tail -20
```

### 查看数据库数据
```sql
-- 用户套餐使用量
SELECT id, name, type, daily_used, quota_used FROM user_packages WHERE user_id = 1;

-- 账户状态
SELECT id, name, type, enabled, rate_limit_reset_at FROM accounts;

-- 每日使用汇总
SELECT user_id, date, model, request_count, total_cost FROM daily_usages WHERE user_id = 1;
```

## 常见操作速查

### 重置用户套餐使用量
```sql
UPDATE user_packages SET daily_used = 0, weekly_used = 0, monthly_used = 0 WHERE user_id = 1;
```

### 清除账户限流状态
```sql
UPDATE accounts SET rate_limit_reset_at = NULL WHERE id = 1;
```

### 刷新调度器缓存
重启服务，或调用 `scheduler.GetScheduler().Refresh()`
```

**更新时机**:
- 每次处理完 BUG 后，把解决方法添加进来
- 发现新的常见问题时

---

> 核心优先：先跑通代理转发，再完善周边功能

| 周 | 模块 | 状态 | 开始日期 | 完成日期 |
|---|------|------|---------|---------|
| W1 | M1 基础框架 | ✅ 完成 | 2025-12-08 | 2025-12-08 |
| W2 | M2 账户管理 | ✅ 完成 | 2025-12-08 | 2025-12-08 |
| W3-4 | M3 代理转发⭐ | ✅ 完成 | 2025-12-08 | 2025-12-08 |
| W5 | M4 API Key管理 | ✅ 完成 | 2025-12-09 | 2025-12-09 |
| W6 | M5 客户端过滤 | ✅ 完成 | 2025-12-14 | 2025-12-14 |
| W7 | M6 费用统计 | ✅ 完成 | 2025-12-09 | 2025-12-09 |
| W8 | M8 套餐系统 | ✅ 完成 | 2025-12-10 | 2025-12-10 |
| W9-10 | M7 系统监控 | ✅ 完成 | 2025-12-15 | 2025-12-15 |

---

## 文档更新记录

| 日期 | 文档 | 变更内容 |
|------|------|---------|
| 2025-12-08 | README.md | 初始化文档结构和规范 |
| 2025-12-08 | 架构设计方案.md | 完成整体架构设计 |
| 2025-12-08 | 参考项目总结.md | 完成参考项目分析 |
| 2025-12-08 | 开发计划.md | 模块化开发计划v2（代理转发优先） |
| 2025-12-08 | 2025-12-08.md | 第一篇开发日志 |
| 2025-12-09 | 2025-12-09.md | M4 API Key、M6 费用统计完成 |
| 2025-12-09 | M4-APIKey管理.md | M4 模块设计文档 |
| 2025-12-09 | M6-费用统计.md | M6 模块设计文档 |
| 2025-12-10 | M8-套餐系统.md | M8 套餐系统模块设计 |
| 2025-12-10 | ADR-001-套餐系统设计.md | 套餐系统架构决策记录 |
| 2025-12-10 | 2024-12-10.md | 套餐系统完善、模型选择优化 |
| 2025-12-11 | 2025-12-11.md | 账户费用统计、文档完善 |
| 2025-12-11 | M9-服务层设计.md | 服务层详细设计文档 |
| 2025-12-11 | 后端架构总览.md | 后端整体架构文档 |
| 2025-12-11 | 功能模块索引.md | 功能模块索引（关键代码+配置项） |
| 2025-12-12 | 2025-12-12.md | 套餐余额Bug修复、BUG处理文件夹 |
| 2025-12-12 | 2025-12-12-套餐余额显示不正确.md | BUG修复记录 |
| 2025-12-13 | 2025-12-13.md | 用户统计按套餐显示、日志规范化 |
| 2025-12-13 | 2025-12-13-用户统计按套餐分别显示.md | 功能优化记录 |
| 2025-12-13 | README.md | 完善日志流程规范、文档规范 |
| 2025-12-13 | 故障排查手册.md | 新增：问题速查手册 |
| 2025-12-13 | 功能模块索引.md | 更新：添加并发控制相关内容 |
| 2025-12-13 | 2025-12-13-账户和用户并发控制功能完善.md | 新增：并发控制功能优化记录 |
| 2025-12-13 | 2025-12-13.md | 更新：添加账户并发列、简化缓存管理页面 |
| 2025-12-13 | 2025-12-13.md | 更新：缓存管理页面完善（聚合视图） |
| 2025-12-13 | 代码索引.md | 更新：缓存管理变更记录、Redis Key索引 |
| 2025-12-13 | 功能模块索引.md | 更新：缓存管理模块（聚合视图、TTL配置、智能续期） |
| 2025-12-13 | 故障排查手册.md | 更新：添加缓存问题排查、Redis命令 |
| 2025-12-15 | 2025-12-15.md | 新增：系统监控、系统日志查看功能 |
| 2025-12-15 | 功能模块索引.md | 新增：系统监控（M12）、系统日志（M13）模块 |
| 2025-12-15 | 代码索引.md | 更新：添加系统日志handler、变更记录 |
| 2025-12-15 | 接口文档/系统监控接口文档.md | 新增：系统监控 API 接口文档 |
| 2025-12-15 | 接口文档/系统日志接口文档.md | 新增：系统日志 API 接口文档 |
| 2025-12-16 | 2025-12-16.md | 新增：系统日志支持服务器日志查看 |
| 2025-12-16 | 代码索引.md | 更新：系统日志支持服务器日志变更记录 |
| 2025-12-16 | 功能模块索引.md | 更新：系统日志模块（增加服务器日志白名单） |
| 2025-12-16 | 接口文档/系统日志接口文档.md | 更新：增加 source 参数、服务器日志说明 |
| 2025-12-17 | README.md (项目根目录) | 更新：添加 OpenAI Responses API 使用说明 |
| 2025-12-17 | 代码索引.md | 更新：添加 OpenAI Responses API 变更记录、代码索引 |
| 2025-12-17 | 功能模块索引.md | 新增：M14 OpenAI Responses API 模块 |
| 2025-12-17 | 接口文档/OpenAI-Responses接口文档.md | 新增：OpenAI Responses API 接口文档 |
| 2025-12-17 | BUG处理/2025-12-17-SSH断开后服务停止问题.md | 新增：SSH断开后服务停止问题分析与systemd解决方案 |
| 2025-12-17 | 故障排查手册.md | 更新：添加SSH断开后服务停止的排查和解决方案 |
| 2025-12-17 | 功能模块索引.md | 更新：M14 OpenAI Responses API 添加会话粘性支持说明 |
| 2025-12-17 | 代码索引.md | 更新：添加 OpenAI Responses API 会话粘性变更记录 |
| 2025-12-17 | 开发日志/2025-12-17.md | 新增：今日开发日志（会话粘性支持） |
| 2025-12-17 | 接口文档/OpenAI-Responses接口文档.md | 更新：添加会话粘性章节 |
| 2025-12-17 | 故障排查手册.md | 更新：添加 OpenAI Responses 会话粘性排查 |
| 2025-12-17 | 模块设计/M3-代理转发.md | 更新：添加 OpenAI Responses 路由和会话粘性说明 |
| 2025-12-17 | 决策记录/ADR-002-会话粘性设计.md | 新增：会话粘性设计决策记录 |
| 2025-12-19 | 开发日志/2025-12-19.md | 新增：今日开发日志（多账户类型支持、会话粘性、健康检查） |
| 2025-12-19 | 代码索引.md | 更新：健康检查服务变更记录（ChatGPT OAuth 验证） |
| 2025-12-19 | 功能模块索引.md | 更新：M15 账号健康检查模块验证方式表 |
| 2025-12-19 | 故障排查手册.md | 新增：七、健康检查问题排查章节 |
| 2025-12-23 | 开发日志/2025-12-23.md | 新增：HTTP客户端连接池优化开发日志 |
| 2025-12-23 | 代码索引.md | 更新：添加 HTTP 客户端连接池优化变更记录 |
| 2025-12-23 | 功能模块索引.md | 更新：代理转发模块添加 HTTP 客户端小节 |
| 2025-12-24 | 开发日志/2025-12-24.md | 新增：操作日志功能修复开发日志 |
| 2025-12-24 | BUG处理/2025-12-24-操作日志修复.md | 新增：操作日志BUG修复记录（登录用户信息、target_name为空） |
| 2025-12-24 | 代码索引.md | 更新：添加操作日志修复变更记录（路径ID正则提取、Unscoped查询） |
| 2025-12-24 | 功能模块索引.md | 更新：新增第16节操作日志模块（模块常量、API接口、数据库表结构） |
| 2025-12-24 | 开发日志/2025-12-24.md | 更新：操作日志前端优化（筛选分页重置、精简操作选项） |
| 2025-12-24 | README.md (项目根目录) | 更新：移除 Redis 依赖，改用内存缓存 |
| 2025-12-24 | 故障排查手册.md | 更新：移除 Redis 相关排查命令，更新为 MySQL/内存缓存 |
| 2025-12-24 | README.md (docs) | 更新：移除 Redis 相关说明 |
| 2025-12-24 | 代码索引.md | 更新：移除 Redis Key 索引、sync服务，改为内存缓存结构 |
| 2025-12-29 | 接口文档/README.md | 更新：按平台 Base URL 方式整理代理端点，统一后台接口响应格式说明，修复乱码，补充验证码接口 |
| 2025-12-29 | 接口文档/认证接口文档.md | 更新：补充验证码获取/状态接口与登录/注册参数说明，响应格式改为 `code=0` |
| 2025-12-29 | 接口文档/APIKey接口文档.md | 更新：代理端点改为平台路由（/openai、/claude、/gemini），响应格式改为 `code=0` |
| 2025-12-29 | 接口文档/代理转发接口文档.md | 更新：新增 Base URL 配置表，端点更新为平台路由，补充 x-api-key 认证说明 |
| 2025-12-29 | 接口文档/OpenAI-Responses接口文档.md | 更新：补充平台路由说明（/openai/responses、/openai/v1/responses） |
| 2025-12-29 | 接口文档/用户接口文档.md | 更新：响应格式改为 `code=0,message=success` |
| 2025-12-29 | 接口文档/系统监控接口文档.md | 更新：响应格式改为 `code=0,message=success` |
| 2025-12-29 | 接口文档/管理员接口-*.md | 更新：响应格式改为 `code=0,message=success` |
| 2025-12-24 | 功能模块索引.md | 更新：移除 Redis 相关配置，改用内存缓存 |
| 2025-12-24 | 接口文档/系统监控接口文档.md | 更新：/api/admin/monitor/redis 改为 /cache |
| 2025-12-24 | 接口文档/OpenAI-Responses接口文档.md | 更新：会话粘性存储从 Redis 改为内存缓存 |
| 2025-12-24 | 模块设计/M7-缓存管理.md | 重写：从 Redis 架构改为 sync.Map 内存缓存架构 |
| 2025-12-24 | 开发日志/2025-12-24.md | 更新：添加 Redis 移除、内存缓存替换工作记录 |
| 2025-12-24 | 代码索引.md | 更新：添加 Redis 移除变更记录（架构变更、新增/修改方法、API变更） |
| 2025-12-25 | 开发日志/2025-12-25.md | 新增：模型映射显示修复、账户模型映射选择优化 |
| 2025-12-25 | 代码索引.md | 更新：添加模型映射显示修复、账户模型映射选择优化变更记录 |
| 2025-12-25 | 功能模块索引.md | 更新：账户管理模块添加模型映射配置说明 |
| 2025-12-26 | 开发日志/2025-12-26.md | 新增：GLM缓存Token解析、TailWriter、MCP代理讨论 |
| 2025-12-26 | 决策记录/ADR-003-MCP代理方案讨论.md | 新增：MCP代理方案讨论（方案A推荐） |
| 2025-12-26 | 代码索引.md | 更新：添加GLM缓存解析、TailWriter变更记录 |
| 2025-12-27 | 开发日志/2025-12-27.md | 新增：移除全局模型映射、Thinking Block修复、ModelMapping过滤修复 |
| 2025-12-27 | 代码索引.md | 更新：添加三项变更记录（ModelMapping过滤、Thinking Block、移除全局映射） |
| 2025-12-27 | 功能模块索引.md | 更新：账户管理添加ModelMapping过滤方法、Claude适配器扩展功能表 |
| 2025-12-27 | BUG处理/2025-12-27-ModelMapping过滤逻辑修复.md | 新增：账户ModelMapping过滤逻辑BUG修复记录 |
| 2025-12-27 | README.md (docs) | 新增：代码文件注释规范（文件作用、负责功能、重要程度） |
| 2025-12-29 | 开发日志/2025-12-29.md | 新增：首页动态效果增强、配置修复、端点显示优化 |
| 2025-12-29 | 代码索引.md | 更新：添加首页变更记录、Home.vue 记录 |
| 2025-12-29 | 功能模块索引.md | 更新：新增第1节首页模块、更新模块编号、最后更新时间 |
| 2025-12-29 | web/src/views/Home.vue | 更新：文件注释（动态效果、服务端点、API文档、教程） |
